<html>

  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/mocha/mocha.css" />
    <script src="/mocha/mocha.js"></script>
    <script src="/mini-module.js" data-module-name="mini-module"></script>
    <script src="/mini-promise.js" data-module-name="mini-promise"></script>
    <script src="/mini-http.js" data-module-name="mini-http"></script>
    <script src="/test/data.js"></script>
  </head>
  <body>
    <div id="mocha"></div>
    <script>
      document.onreadystatechange = function () {
          if (document.readyState == "complete") {
              console.log("document done, configure mocha and load tests");
              mocha.ui('bdd');
              mocha.reporter('html');

              var s = document.createElement("script");
              s.type = "application/javascript";
              s.addEventListener("load", function (event) {
                  console.log("tests load, run mocha");
                  if (window.mochaPhantomJS) {
                      mochaPhantomJS.run();
                  } else {
                      mocha.run();
                  }
              });
              s.src = "/test/tests.js";
              document.head.appendChild(s);
          }
      };
    </script>
  </body>
</html>
